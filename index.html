<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Patient Pop Social</title>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css">
  <!-- Bootstrap core CSS -->
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <!-- Material Design Bootstrap -->
  <link href="css/mdb.min.css" rel="stylesheet">
  <!-- Your custom styles (optional) -->
  <link href="css/style.css" rel="stylesheet">
</head>

<header>

  <nav class="navbar fixed-top navbar-expand-lg navbar-light scrolling-navbar">

    <a class="navbar-brand" href="#"><strong>Patiient Pop</strong></a>

    <div class="row justify-content-center">
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item active">
            <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Link</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Profile</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
</header>
<body>

  <!-- Start your project here-->
  <div style="height: 100vh">
    <!-- <div class="flex-center flex-column"> -->
      <!-- <div class="text-hide animated fadeIn mb-4" style="background-image: url('img/homepage-hero.jpg'); width: 185%; height: 850px; padding-top: 200px; background-size: cover;background-position: center center;"></div> -->
      <div class="hero-widget">
        <div class="l-container">
          <div class="hero-widget--headline">
            <h1 class="hero-widget--head" style="color: #3b3f48;"> Leaders in practice growth</h1>
          </div>
          <div class="hero-widget--description">
            <p class="paragraph "></p>
            <p class="paragraph ">Instantly diagnose how your practice appears in instagram for free.</p>
            <button type="button" id="diagnose-your-practice" class="btn btn-success btn-rounded" style="font-size: 15px" data-toggle="modal" data-target="#userDetailsModal"> See my results <i class="fas fa-long-arrow-alt-right" style="font-size: 15px"> </i></button>
             <!-- <a id="diagnose-your-practice" class="btn btn--large" style="display: inline-flex;">See my results</a> -->
             <!-- <a id="competitive-scanner-link" class="btn btn--large btn--next diagnose-practice-hero" style="display: none;">See my results</a> -->
             <p></p>
           </div>
         </div>
       </div>

       <!-- Modal -->
        <div class="modal fade" id="userDetailsModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
          aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header text-center">
                <h4 class="modal-title w-100 font-weight-bold">See how your practice appears online, instantly and for free.</h4>
                <!-- <h4 class="text-center" style="font-weight: bold;">See how your practice appears online, instantly and for free.</h4> -->
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body mx-3">
                <ul class="steps">
                              <li class="next-step step-1 active" data-next="1"><span>1</span></li>
                              <li class="next-step step-2" data-next="2"><span>2</span></li>
                              <li class="next-step step-3" data-next="3"><span>3</span></li>
                </ul>

                  <!-- <div class="step step-1 active">
                      <div class="batch-g batch-g--gutter">
                              <div class="batch-c-1-1">
                                  <div class="form-group">
                                      <input class="txt-input input-not-empty" name="website" id="website" required="required" type="text" pattern="^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&amp;'\(\)\*\+,;=.]+$">
                                      <label for="website" class=" control-label">Website URL</label>
                                  </div>
                              </div>
                          </div>
                          <input class="btn btn--next next-step" type="submit" data-next="2" value="Next">
                  </div> -->
                  <div class="diagnose-form">                       

                    <div class="step step-1">
                      <form>
                            <div class="md-form mb-5">
                              <i class="fas fa-user-circle prefix grey-text"></i>
                              <input name="practicename" id="username" required="required" type="text" class="form-control validate" required="required">
                              <label data-error="wrong" data-success="right" for="username">Instagram User Name</label>
                            </div>
                            
                            <div class="md-form mb-4">
                              <i class="fas fa-address-card prefix grey-text"></i>
                              <input type="text" id="address" name="address" class="form-control validate" required="required">
                              <label data-error="wrong" data-success="right" for="address">Street Address</label>
                            </div>
                            <div class="md-form mb-4">
                              <i class="fas fa-file-archive prefix grey-text"></i>
                              <input type="Number" id="zipcode" name="zipcode" class="form-control validate" required="required">
                              <label data-error="wrong" data-success="right" for="zipcode">ZIP</label>
                            </div>

                            <button type="submit" class="btn btn-success btn--next next-step" data-next="2" value="Next">Next</button>
                        </form>

                    </div>

                    <div class="step step-2">
                        
                      <form>
                            <div class="md-form mb-5">
                              <i class="fas fa-user-circle prefix grey-text"></i>
                              <input name="firstname" id="firstname" required="required" type="text" class="form-control validate" required="required">
                              <label data-error="wrong" data-success="right" for="firstname">First Name</label>
                            </div>
                            
                            <div class="md-form mb-4">
                              <i class="fas fa-address-card prefix grey-text"></i>
                              <input type="text" id="lastname" name="lastname" class="form-control validate" required="required">
                              <label data-error="wrong" data-success="right" for="lastname">Last Name</label>
                            </div>
                            <div class="md-form mb-4">
                              <i class="fas fa-file-archive prefix grey-text"></i>
                              <input type="text" id="phone_number" name="phone_number" class="form-control validate" required="required"  pattern="[789][0-9]{9}" > 
                              <label data-error="wrong" data-success="right" for="phone_number">Phone Number</label>
                            </div>
                            <div class="md-form mb-4">
                              <i class="fas fa-file-archive prefix grey-text"></i>
                              <input type="email" id="email" name="email" class="form-control validate" required="required">
                              <label data-error="wrong" data-success="right" for="email">Email</label>
                            </div>

                            <button type="submit" class="btn btn-success btn--next next-step" data-next="3" value="Next">Next</button>
                      </form>
                    </div>
                  </div>
                  <div class="step step-3">
                        
                      <form>
                          <div class="row justify-content-center">
                              <button type="button" class="btn btn-ins" onclick="loginToInstagram()"><i class="fab fa-instagram pr-1"></i> Login with instagram to finish</button>
                          </div>

                      </form>
                    </div>
                  </div>
              </div>
              <div class="modal-footer">
                <!-- <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button> -->
                <button type="button" class="btn btn-success" hidden="true">Next</button>
              </div>
            </div>
          </div>
        </div>

    </div>
  <!-- </div> -->
  <!-- SCRIPTS -->
  <!-- JQuery -->
  <script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>
  <!-- Bootstrap tooltips -->
  <script type="text/javascript" src="js/popper.min.js"></script>
  <!-- Bootstrap core JavaScript -->
  <script type="text/javascript" src="js/bootstrap.min.js"></script>
  <!-- MDB core JavaScript -->
  <script type="text/javascript" src="js/mdb.min.js"></script>

  <script type="text/javascript">

    (function($) {

        $('.step-1').addClass("active");
        $('.next-step').on('click', function(event) {
            var valid = true;
            // $('.diagnose-form input:visible[required="required"]').each(function() {
            //     if(!this.checkValidity()) {
            //         valid = false;
            //         this.focus();
            //     }
            // });
            if (valid) {
                event.preventDefault();
                var nextStep = $(this).data('next');
                $('.next-step').removeClass("active");
                $('.step').removeClass("active");
                $('.step-' + nextStep).addClass("active");
            }
        });

    })( jQuery );

    function loginToInstagram(){
      localStorage.setItem("username", document.getElementById('username').value);
      localStorage.setItem("street_address",document.getElementById('address').value);
      localStorage.setItem("zipcode",document.getElementById('zipcode').value);

      localStorage.setItem("firstname",document.getElementById('firstname').value);
      localStorage.setItem("lastname",document.getElementById('lastname').value);
      localStorage.setItem("phone_number",document.getElementById('phone_number').value);
      localStorage.setItem("email",document.getElementById('email').value);

      console.log("Saving to localStorage");

      var client_id = "794e4bf6da004573b2ca3b848206b462";
      var redirect_uri = "http://localhost/instafeed/follow.html";

      var token_request_uri = "https://www.instagram.com/oauth/authorize/?client_id="+client_id+"&redirect_uri="+redirect_uri+"&response_type=token&scope=public_content";

      var gramblas_uri = "https://gramblast.com/instagram/info?username=" + document.getElementById('username').value;
      console.log(token_request_uri);

      // $.ajax({
      //     type: "GET",
      //     url: token_request_uri,
      //     // data: reqBody,
      //     dataType: "json",
      //     success: function(data, textStatus) {
      //         if (data.redirect) {
      //             // data.redirect contains the string URL to redirect to
      //             // window.location.href = data.redirect;
      //             console.log(data.redirect);
      //         }
      //         else {
      //             // data.form contains the HTML for the replacement form
      //             console.log(data)
      //           }
      //     }
      // });
       // window.location = token_request_uri;
      // https://www.instagram.com/oauth/authorize/?client_id=794e4bf6da004573b2ca3b848206b462&redirect_uri=http://localhost/instafeed&response_type=token&scope=public_content
        var url = $(location).attr("href");
        if(url.indexOf("index.html")>0){
            window.location = url.substring(0, url.indexOf("index.html")) + "follow.html#" + document.getElementById('username').value;
        }
        else{
          window.location = url + "follow.html#" + document.getElementById('username').value;
        }

    }

</script>
</body>

</html>
